require 'rails_helper'

RSpec.describe SVG::ReactionComposer do

  let(:composer) {
    SVG::ReactionComposer.new(["AFABGHUZZDYHJO-UHFFFAOYSA-N", "KIWAUQFHKHLABA-AATRIKPKSA-N", "XLYOFNOQVPJJNP-UHFFFAOYSA-N"],
                                         ["AFABGHUZZDYHJO-UHFFFAOYSA-N", "KIWAUQFHKHLABA-AATRIKPKSA-N", "XLYOFNOQVPJJNP-UHFFFAOYSA-N"],
                                         ["AFABGHUZZDYHJO-UHFFFAOYSA-N", "KIWAUQFHKHLABA-AATRIKPKSA-N", "XLYOFNOQVPJJNP-UHFFFAOYSA-N"])
  }

  describe 'composing the SVG' do

    let(:svg) { composer.compose_reaction_svg }
    let(:expected_svg) {
      "<?xml version=\"1.0\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:cml=\"http://www.xml-cml.org/schema\" version=\"1.1\">\n        <title>Reaction 1</title>\n        <rect x=\"0\" y=\"0\" width=\"750.0\" height=\"100\" fill=\"white\"/>\nstarting_materials<g transform=\"translate(0, 0)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 263.923 214.641\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"80.0\" y1=\"120.0\" x2=\"80.0\" y2=\"93.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"66.5\" y2=\"143.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"53.0\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"114.6\" y2=\"140.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"85.9\" y2=\"93.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"109.3\" y2=\"107.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"95.8\" y2=\"56.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"149.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"128.1\" y2=\"163.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"101.1\" y2=\"163.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"149.3\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"176.3\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"149.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"162.8\" y2=\"143.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"80.0\" x2=\"149.3\" y2=\"53.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"80.0\" x2=\"189.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"212.7\" y2=\"66.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"189.3\" y2=\"53.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"202.8\" y2=\"103.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"74.000000\" y=\"88.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"54.000000\" y=\"162.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"34.000000\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"68.641016\" y=\"108.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"103.282032\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"83.282032\" y=\"53.358984\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"128.641016\" y=\"182.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"88.641016\" y=\"182.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"183.282032\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"143.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"217.923048\" y=\"68.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"183.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"203.282032\" y=\"122.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"163.282032\" y=\"162.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g><g transform=\"translate(100, 0)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 173.637 336.084\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"78.5\" y1=\"147.5\" x2=\"100.3\" y2=\"185.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"73.3\" y1=\"150.5\" x2=\"95.1\" y2=\"188.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"149.0\" x2=\"97.7\" y2=\"106.1\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"149.0\" x2=\"53.0\" y2=\"148.8\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"187.1\" x2=\"75.9\" y2=\"230.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"187.1\" x2=\"120.6\" y2=\"187.3\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"106.1\" x2=\"115.2\" y2=\"71.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"94.0\" y1=\"104.2\" x2=\"111.4\" y2=\"69.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"101.5\" y1=\"108.0\" x2=\"118.9\" y2=\"73.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"230.0\" x2=\"58.5\" y2=\"264.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"79.7\" y1=\"231.8\" x2=\"62.2\" y2=\"266.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"72.2\" y1=\"228.1\" x2=\"54.7\" y2=\"262.7\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"115.2\" y1=\"71.5\" x2=\"125.2\" y2=\"51.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"58.5\" y1=\"264.6\" x2=\"48.5\" y2=\"284.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"34.000000\" y=\"156.615741\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"127.637227\" y=\"195.468538\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"125.022771\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"36.614456\" y=\"304.084280\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g><g transform=\"translate(200, 0)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 149.282 100\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"85.9\" y1=\"53.5\" x2=\"98.0\" y2=\"46.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"63.4\" y1=\"53.5\" x2=\"51.3\" y2=\"46.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"68.641016\" y=\"68.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">O</text>\n<text x=\"103.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"34.000000\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g>arrow<g transform=\"translate(300,0)\">        <svg font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" stroke-linecap=\"round\">\n          <line x1=\"0\" y1=\"50\" x2=\"150\" y2=\"50\"/>\n          <line x1=\"150\" y1=\"50\" x2=\"140\" y2=\"40\"/>\n          <line x1=\"150\" y1=\"50\" x2=\"140\" y2=\"60\"/>\n        </svg>\n</g>reactants<g transform=\"translate(300, 0) scale(0.5)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 263.923 214.641\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"80.0\" y1=\"120.0\" x2=\"80.0\" y2=\"93.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"66.5\" y2=\"143.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"53.0\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"114.6\" y2=\"140.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"85.9\" y2=\"93.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"109.3\" y2=\"107.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"95.8\" y2=\"56.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"149.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"128.1\" y2=\"163.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"101.1\" y2=\"163.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"149.3\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"176.3\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"149.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"162.8\" y2=\"143.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"80.0\" x2=\"149.3\" y2=\"53.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"80.0\" x2=\"189.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"212.7\" y2=\"66.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"189.3\" y2=\"53.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"202.8\" y2=\"103.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"74.000000\" y=\"88.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"54.000000\" y=\"162.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"34.000000\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"68.641016\" y=\"108.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"103.282032\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"83.282032\" y=\"53.358984\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"128.641016\" y=\"182.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"88.641016\" y=\"182.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"183.282032\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"143.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"217.923048\" y=\"68.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"183.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"203.282032\" y=\"122.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"163.282032\" y=\"162.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g><g transform=\"translate(350, 0) scale(0.5)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 173.637 336.084\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"78.5\" y1=\"147.5\" x2=\"100.3\" y2=\"185.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"73.3\" y1=\"150.5\" x2=\"95.1\" y2=\"188.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"149.0\" x2=\"97.7\" y2=\"106.1\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"149.0\" x2=\"53.0\" y2=\"148.8\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"187.1\" x2=\"75.9\" y2=\"230.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"187.1\" x2=\"120.6\" y2=\"187.3\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"106.1\" x2=\"115.2\" y2=\"71.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"94.0\" y1=\"104.2\" x2=\"111.4\" y2=\"69.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"101.5\" y1=\"108.0\" x2=\"118.9\" y2=\"73.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"230.0\" x2=\"58.5\" y2=\"264.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"79.7\" y1=\"231.8\" x2=\"62.2\" y2=\"266.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"72.2\" y1=\"228.1\" x2=\"54.7\" y2=\"262.7\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"115.2\" y1=\"71.5\" x2=\"125.2\" y2=\"51.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"58.5\" y1=\"264.6\" x2=\"48.5\" y2=\"284.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"34.000000\" y=\"156.615741\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"127.637227\" y=\"195.468538\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"125.022771\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"36.614456\" y=\"304.084280\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g><g transform=\"translate(400, 0) scale(0.5)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 149.282 100\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"85.9\" y1=\"53.5\" x2=\"98.0\" y2=\"46.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"63.4\" y1=\"53.5\" x2=\"51.3\" y2=\"46.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"68.641016\" y=\"68.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">O</text>\n<text x=\"103.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"34.000000\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g>products<g transform=\"translate(450, 0)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 263.923 214.641\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"80.0\" y1=\"120.0\" x2=\"80.0\" y2=\"93.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"66.5\" y2=\"143.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"53.0\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"80.0\" y1=\"120.0\" x2=\"114.6\" y2=\"140.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"85.9\" y2=\"93.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"109.3\" y2=\"107.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"95.8\" y2=\"56.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"109.3\" y1=\"80.0\" x2=\"149.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"128.1\" y2=\"163.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"101.1\" y2=\"163.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"114.6\" y1=\"140.0\" x2=\"149.3\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"176.3\" y2=\"120.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"149.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"120.0\" x2=\"162.8\" y2=\"143.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"80.0\" x2=\"149.3\" y2=\"53.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"149.3\" y1=\"80.0\" x2=\"189.3\" y2=\"80.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"212.7\" y2=\"66.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"189.3\" y2=\"53.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"189.3\" y1=\"80.0\" x2=\"202.8\" y2=\"103.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"74.000000\" y=\"88.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"54.000000\" y=\"162.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"34.000000\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"68.641016\" y=\"108.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"103.282032\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"83.282032\" y=\"53.358984\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"128.641016\" y=\"182.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"88.641016\" y=\"182.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"183.282032\" y=\"128.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"143.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"217.923048\" y=\"68.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"183.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"203.282032\" y=\"122.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"163.282032\" y=\"162.641016\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g><g transform=\"translate(550, 0)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 173.637 336.084\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"78.5\" y1=\"147.5\" x2=\"100.3\" y2=\"185.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"73.3\" y1=\"150.5\" x2=\"95.1\" y2=\"188.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"149.0\" x2=\"97.7\" y2=\"106.1\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"149.0\" x2=\"53.0\" y2=\"148.8\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"187.1\" x2=\"75.9\" y2=\"230.0\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"187.1\" x2=\"120.6\" y2=\"187.3\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"97.7\" y1=\"106.1\" x2=\"115.2\" y2=\"71.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"94.0\" y1=\"104.2\" x2=\"111.4\" y2=\"69.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"101.5\" y1=\"108.0\" x2=\"118.9\" y2=\"73.4\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"75.9\" y1=\"230.0\" x2=\"58.5\" y2=\"264.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"79.7\" y1=\"231.8\" x2=\"62.2\" y2=\"266.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"72.2\" y1=\"228.1\" x2=\"54.7\" y2=\"262.7\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"115.2\" y1=\"71.5\" x2=\"125.2\" y2=\"51.6\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"58.5\" y1=\"264.6\" x2=\"48.5\" y2=\"284.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"34.000000\" y=\"156.615741\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"127.637227\" y=\"195.468538\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"125.022771\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"36.614456\" y=\"304.084280\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g><g transform=\"translate(650, 0)\"><svg width=\"100\" height=\"100\" x=\"0\" y=\"0\" viewBox=\"0 0 149.282 100\" font-family=\"sans-serif\" stroke=\"rgb(0,0,0)\" stroke-width=\"2\" stroke-linecap=\"round\">\n<line x1=\"85.9\" y1=\"53.5\" x2=\"98.0\" y2=\"46.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<line x1=\"63.4\" y1=\"53.5\" x2=\"51.3\" y2=\"46.5\" stroke=\"rgb(0,0,0)\" stroke-width=\"2.0\"/>\n<text x=\"68.641016\" y=\"68.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">O</text>\n<text x=\"103.282032\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n<text x=\"34.000000\" y=\"48.000000\" fill=\"rgb(0,0,0)\" stroke=\"rgb(0,0,0)\" stroke-width=\"1\" font-size=\"16\">H</text>\n</svg></g></svg>\n"
    }

    it 'should generate a svg' do
      expect(svg).to eq(expected_svg)
    end

    it 'should save the svg' do
      file_path = composer.send(:file_path)
      composer.compose_reaction_svg_and_save
      expect(File.exist?(file_path)).to eq(true)
    end
  end

end
